
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * GLOBAL DEVELOPMENT PERMISSIVE POLICY (V13.0.0)
     * 
     * To ensure zero friction for the Personnel Portal and cross-collection queries,
     * we are enabling open read/write access. 
     * WARNING: This should be restricted to institutional tenancy logic before production deployment.
     */
    match /{allPaths=**} {
      allow read, write: if true;
    }

    /**
     * EXPLICIT PATHS (For Indexing Support)
     */
    match /institutions/{institutionId}/{document=**} {
      allow read, write: if true;
    }

    match /users/{userId}/{document=**} {
      allow read, write: if true;
    }
  }
}
