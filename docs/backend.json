
{
  "entities": {
    "Institution": {
      "title": "Institution",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "country": { "type": "string" },
        "taxIdentificationNumber": { "type": "string" },
        "isActive": { "type": "boolean" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    },
    "PayrollRun": {
      "title": "PayrollRun",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "runNumber": { "type": "string" },
        "periodId": { "type": "string" },
        "status": { "type": "string", "enum": ["Draft", "Posted", "Settled"] },
        "totalGross": { "type": "number" },
        "totalNet": { "type": "number" },
        "totalDeductions": { "type": "number" },
        "totalPAYE": { "type": "number" },
        "totalNSSF": { "type": "number" },
        "totalSHA": { "type": "number" },
        "totalHousing": { "type": "number" },
        "createdBy": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    },
    "PayrollItem": {
      "title": "PayrollItem",
      "type": "object",
      "properties": {
        "employeeId": { "type": "string" },
        "employeeName": { "type": "string" },
        "gross": { "type": "number" },
        "netSalary": { "type": "number" },
        "paye": { "type": "number" },
        "nssf": { "type": "number" },
        "sha": { "type": "number" },
        "housingLevy": { "type": "number" },
        "customDeductions": { "type": "number" }
      }
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/institutions/{institutionId}": {
      "schema": { "$ref": "#/entities/Institution" },
      "description": "Global institution master record."
    },
    "/institutions/{institutionId}/payroll_runs/{runId}": {
      "schema": { "$ref": "#/entities/PayrollRun" },
      "description": "Consolidated payroll cycle headers."
    },
    "/institutions/{institutionId}/payroll_runs/{runId}/items/{itemId}": {
      "schema": { "$ref": "#/entities/PayrollItem" },
      "description": "Individual employee computation lines for a run."
    }
  }
}
